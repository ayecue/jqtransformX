/* jqtransformX, Author: swe, Version: 0.1.0.5 */
(function(e){"use strict";var t='input:submit, input:reset, input[type="button"]',n="input:text, input:password",r="input:checkbox",i="input:radio",s="textarea",o="select";var u,a=function(t){var n=t.next();if(!n.is("label")){if((n=t.prev()).is("label")){var r=t[0]?t[0].form:null,i=t.attr("id");if(i&&r){n=e(r).find('label[for="'+i+'"]')}}}return n.is("label")?n.css("cursor","pointer"):false},f=e.browser||function(){var e={},t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),r;if(n||(r=t.match(/version\/([\.\d]+)/i))){e[n[1]]=true;e.version=r?r[1]:n[2];return e}e[navigator.appName]=true;e.version=navigator.appVersion;return e}(),l=function(u,a){if(typeof a=="object"){a=e.extend({preloadImg:true},a);var f={keys:[]},l={transformInputButton:e(t,u),transformInputText:e(n,u),transformCheckbox:e(r,u),transformRadio:e(i,u),transformTextarea:e(s,u),transformSelect:e(o,u)};for(var c in l){if(!!l[c]&&l[c].length>0&&!!this[c]){var h=new this[c](l[c],f);if(!!h){f[c]=h;f.keys.push(c)}}}return f}else if(typeof a=="string"&&this[a]){h=new this[a](u,null);if(!!h){var f={keys:[]};f[a]=h;f.keys.push(a);return f}}return false};e.extend(l.prototype,{transformInputButton:function(t,n){var r=[];for(var i=0,s=t.length;i<s;function(i){var s=e(i);if(s.hasClass("jqTransformButton")){return}var o=a(s),u=s.clone(true,true),f=e('<button id="'+i.id+'" name="'+i.name+'" type="'+i.type+'" class="'+i.className+' jqTransformButton"><span><span>'+s.attr("value")+"</span></span>").hover(function(){f.addClass("jqTransformButton_hover")},function(){f.removeClass("jqTransformButton_hover")}).mousedown(function(){f.addClass("jqTransformButton_click")}).mouseup(function(){f.removeClass("jqTransformButton_click")});s.replaceWith(f);var l={inputButton:f,label:o,clear:function(){if(!i){throw"Double free."}f.unbind("hover").unbind("mousedown").unbind("mouseup").replaceWith(u);i=s=u=f=o=null},parentInstance:n,context:t.context};s.data("jqTransform",l);r.push(l)}(t[i++]));return r},transformInputText:function(t,n){var r=[];for(var i=0,s=t.length;i<s;function(i){var s=e(i);if(s.hasClass("jqTransformHidden")||!s.is("input")){return}var o=a(s),u=s.width(),l=s.attr("size"),c,h,p;if(!!l){s.css("width",u=l*10)}s.addClass("jqTransformInput").wrap('<div class="jqTransformInputWrapper"><div class="jqTransformInputInner"><div></div></div></div>');var d=s.parent().parent().parent().css("width",u+10);s.focus(c=function(){d.addClass("jqTransformInputWrapper_focus")}).blur(h=function(){d.removeClass("jqTransformInputWrapper_focus")}).hover(p=function(){d.addClass("jqTransformInputWrapper_hover")},function(){d.removeClass("jqTransformInputWrapper_hover")});if(f.safari){d.addClass("jqTransformSafari");s.css("width",d.width()+16)}var v={inputText:s,label:o,clear:function(){if(!i){throw"Double free."}s.unbind("focus",c).unbind("blur",h).unbind("hover",p).unwrap();i=s=d=o=null},parentInstance:n,context:t.context};s.data("jqTransform",v);r.push(v)}(t[i++]));return r},transformCheckbox:function(t,n){var r=[];for(var i=0,s=t.length;i<s;function(i){var s=e(i);if(s.hasClass("jqTransformHidden")){return}var o=a(s),u=e('<a href="#" class="jqTransformCheckbox"></a>'),f=s.addClass("jqTransformHidden").wrap('<span class="jqTransformCheckboxWrapper"></span>').parent().prepend(u),l;s.change(l=function(){i.checked&&u.addClass("jqTransformChecked")||u.removeClass("jqTransformChecked");return true});u.click(function(){if(!s.attr("disabled")){s.trigger("click").trigger("change")}return false});i.checked&&u.addClass("jqTransformChecked");var c={checkbox:s,label:o,clear:function(){if(!i){throw"Double free."}s.unbind("change",l);u.unbind("click").remove();s.unwrap();i=s=f=u=o=null},parentInstance:n,context:t.context};s.data("jqTransform",c);r.push(c)}(t[i++]));return r},transformRadio:function(t,n){var r=[];for(var i=0,s=t.length;i<s;function(i){var s=e(i);if(s.hasClass("jqTransformHidden")){return}var o=a(s),u=e('<a href="#" class="jqTransformRadio" rel="'+i.name+'"></a>'),f=s.addClass("jqTransformHidden").wrap('<span class="jqTransformRadioWrapper"></span>').parent().prepend(u),l;s.change(l=function(){i.checked&&u.addClass("jqTransformChecked")||u.removeClass("jqTransformChecked");return true});u.click(function(){if(!s.attr("disabled")){s.trigger("click").trigger("change");e('input[name="'+s.attr("name")+'"]',i.form).not(s).each(function(){var t=e(this);t.attr("type")=="radio"&&t.trigger("change")})}return false});i.checked&&u.addClass("jqTransformChecked");var c={radio:s,label:o,clear:function(){if(!i){throw"Double free."}s.unbind("change",l);u.unbind("click").remove();s.unwrap();i=s=f=u=o=null},parentInstance:n,context:t.context};s.data("jqTransform",c);r.push(c)}(t[i++]));return r},transformTextarea:function(t,n){var r=[];for(var i=0,s=t.length;i<s;function(i){var s=e(i);if(s.hasClass("jqtransformdone")){return}s.addClass("jqtransformdone");var o=a(s),u=e('<table cellspacing="0" cellpadding="0" border="0" class="jqTransformTextarea">'+'<tr><td class="jqTransformTextarea-tl"></td><td class="jqTransformTextarea-tm"></td><td class="jqTransformTextarea-tr"></td></tr>'+'<tr><td class="jqTransformTextarea-ml"> </td><td class="jqTransformTextarea-mm"><div></div></td><td class="jqTransformTextarea-mr"> </td></tr>'+'<tr><td class="jqTransformTextarea-bl"></td><td class="jqTransformTextarea-bm"></td><td class="jqTransformTextarea-br"></td></tr>'+"</table>").insertAfter(s).hover(function(){!u.hasClass("jqTransformTextarea-focus")&&u.addClass("jqTransformTextarea-hover")},function(){u.removeClass("jqTransformTextarea-hover")}),l=e(".jqTransformTextarea-mm",u),c=l.children("div"),h,p;s.focus(h=function(){u.removeClass("jqTransformTextarea-hover").addClass("jqTransformTextarea-focus")}).blur(p=function(){u.removeClass("jqTransformTextarea-focus")}).appendTo(c);if(f.safari){l.addClass("jqTransformSafariTextarea");c.css("height",textarea.height()).css("width",textarea.width())}var d={textarea:s,label:o,clear:function(){if(!i){throw"Double free."}u.unbind("hover").remove();s.unbind("focus",h);s.unbind("blur",p);i=s=c=u=o=null},parentInstance:n,context:t.context};s.data("jqTransform",d);r.push(d)}(t[i++]));return r},transformSelect:function(t,n){var r=[];for(var i=0,s=t.length;i<s;function(i){var s=e(i);if(s.hasClass("jqTransformHidden")||!!s.attr("multiple")){return}var o=a(s),l=s.addClass("jqTransformHidden").wrap('<div class="jqTransformSelectWrapper"></div>').parent();l.prepend('<div><span></span><a href="#" class="jqTransformSelectOpen"></a></div><ul></ul>');var c=e("span:eq(0)",l),h=e("ul",l).css("width",s.width()).hide(),p=s.find("option:selected").index()||0,d=[];e("option",i).each(function(t){var n=e(this),r=e("<li>"),o=e('<a href="#" index="'+t+'">'+n.html()+"</a>");h.append(r);r.append(o);o.click(function(){if(t!=p){d[p].removeClass("selected");b.rowIndex=i.selectedIndex=p=t;o.addClass("selected");if(!!i.onchange){i.onchange()}s.trigger("change");c.html(o.html())}h.hide();return false});d.push(o)});d[p].addClass("selected");c.html(d[p].html());var v=e("a.jqTransformSelectOpen",l).click(function(){if(!!u&&h!=u){u.hide()}if(!s.attr("disabled")){u=h;h.slideToggle("fast")}return false});var m=s.outerWidth(),g=f.msie&&parseInt(f.version,10)==7?m>c.innerWidth()-20?m+(v.outerWidth()-20):l.width()-20:m>c.innerWidth()?m+v.outerWidth():l.width();l.css("width",g);h.css("width",g-2);c.css("width",m);h.css({display:"block",visibility:"hidden"});var y=d.length*e("li:first",h).height();y<h.height()&&h.css({height:y,overflow:"hidden"});h.css({display:"none",visibility:"visible"});var b={select:s,row:d,rowIndex:p,label:o,val:function(t){if(!!t){var n=s.children("option"),r=n.length,i;while(r--){i=e(n[r]);if(t==i.val()||t==i.html()){d[r].trigger("click");break}}return true}return s.children("option:eq("+p+")").val()},clear:function(){if(!i){throw"Double free."}v.unbind("click");for(var t=d.length;t--;d[t].unbind("click"));l.children("div:first").remove();h.remove();s.unwrap().removeClass("jqTransformHidden");e.removeData(i,"jqTransform");i=s=l=h=c=v=d=o=null},parentInstance:n,context:t.context};s.data("jqTransform",b);r.push(b)}(t[i++]));return r}});e(document).mousedown(function(t){if(!!u&&e(t.target).parents(".jqTransformSelectWrapper").length==0){u.hide();u=null}});e.fn.jqTransformProp=function(){var t=this[0],n=e(t);if(n.hasClass("jqtransformdone")||n.hasClass("jqTransformHidden")){return n.data("jqTransform")}return false};e.fn.jqTransform=function(t){return this.each(function(n,r){var i=e(r);if(i.hasClass("jqtransformdone")){return}i.data("jqTransform",new l(i,t||{}));i.addClass("jqtransformdone")})};e.fn.jqTransInputButton=function(t){return this.each(function(t,n){l(e(n),"transformInputButton")})};e.fn.jqTransInputText=function(t){return this.each(function(t,n){l(e(n),"transformInputText")})};e.fn.jqTransRadio=function(t){return this.each(function(t,n){l(e(n),"transformRadio")})};e.fn.jqTransTextarea=function(t){return this.each(function(t,n){l(e(n),"transformTextarea")})};e.fn.jqTransSelect=function(t){return this.each(function(t,n){l(e(n),"transformSelect")})}})(jQuery)
