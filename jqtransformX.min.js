/* jqtransformX, Author: swe, Version: 0.1.0.1 */
(function(e){"use strict";var t='input:submit, input:reset, input[type="button"]',n="input:text, input:password",r="input:checkbox",i="input:radio",s="textarea",o="select";var u,a=function(t){var n=t.next();if(!n.is("label")){if((n=t.prev()).is("label")){var r=t[0]?t[0].form:null,i=t.attr("id");if(i&&r){n=e(r).find('label[for="'+i+'"]')}}}return n.is("label")?n.css("cursor","pointer"):false},f=function(u,a){if(typeof a=="object"){a=e.extend({preloadImg:true},a);var f={keys:[]},l={transformInputButton:e(t,u),transformInputText:e(n,u),transformCheckbox:e(r,u),transformRadio:e(i,u),transformTextarea:e(s,u),transformSelect:e(o,u)};for(var c in l){if(!!l[c]&&l[c].length>0&&!!this[c]){var h=new this[c](l[c],f);if(!!h){f[c]=h;f.keys.push(c)}}}return f}else if(typeof a=="string"&&this[a]){h=new this[a](u,null);if(!!h){var f={keys:[]};f[a]=h;f.keys.push(a);return f}}return false};e.extend(f.prototype,{transformInputButton:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=e(o);if(u.hasClass("jqTransformButton")){continue}var f=a(u),l=u.clone(true,true),c=e('<button id="'+o.id+'" name="'+o.name+'" type="'+o.type+'" class="'+o.className+' jqTransformButton"><span><span>'+u.attr("value")+"</span></span>").hover(function(){c.addClass("jqTransformButton_hover")},function(){c.removeClass("jqTransformButton_hover")}).mousedown(function(){c.addClass("jqTransformButton_click")}).mouseup(function(){c.removeClass("jqTransformButton_click")});u.replaceWith(c);var h={inputButton:c,label:f,clear:function(){if(!o){throw"Double free."}c.replaceWith(l);o=u=l=c=f=null},parentInstance:n,context:t.context};e.data(o,"jqTransform",h);r.push(h)}return r},transformInputText:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=e(o);if(u.hasClass("jqTransformHidden")||!u.is("input")){continue}var f=a(u),l=u.width(),c=u.attr("size"),h,p,d;if(!!c){u.css("width",l=c*10)}u.addClass("jqTransformInput").wrap('<div class="jqTransformInputWrapper"><div class="jqTransformInputInner"><div></div></div></div>');var v=u.parent().parent().parent().css("width",l+10);u.focus(h=function(){v.addClass("jqTransformInputWrapper_focus")}).blur(p=function(){v.removeClass("jqTransformInputWrapper_focus")}).hover(d=function(){v.addClass("jqTransformInputWrapper_hover")},function(){v.removeClass("jqTransformInputWrapper_hover")});if(e.browser.safari){v.addClass("jqTransformSafari");u.css("width",v.width()+16)}var m={inputText:u,label:f,clear:function(){if(!o){throw"Double free."}u.unbind("focus",h).unbind("blur",p).unbind("hover",d).unwrap();o=u=v=f=null},parentInstance:n,context:t.context};e.data(o,"jqTransform",m);r.push(m)}return r},transformCheckbox:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=e(o);if(u.hasClass("jqTransformHidden")){continue}var f=a(u),l=e('<a href="#" class="jqTransformCheckbox"></a>'),c=u.addClass("jqTransformHidden").wrap('<span class="jqTransformCheckboxWrapper"></span>').parent().prepend(l),h;u.change(h=function(){o.checked&&l.addClass("jqTransformChecked")||l.removeClass("jqTransformChecked");return true});l.click(function(){if(!u.attr("disabled")){u.trigger("click").trigger("change")}return false});o.checked&&l.addClass("jqTransformChecked");var p={checkbox:u,label:f,clear:function(){if(!o){throw"Double free."}u.unbind("change",h);l.unbind("click").remove();u.unwrap();o=u=c=l=f=null},parentInstance:n,context:t.context};e.data(o,"jqTransform",p);r.push(p)}return r},transformRadio:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=e(o);if(u.hasClass("jqTransformHidden")){continue}var f=a(u),l=e('<a href="#" class="jqTransformRadio" rel="'+o.name+'"></a>'),c=u.addClass("jqTransformHidden").wrap('<span class="jqTransformRadioWrapper"></span>').parent().prepend(l),h;u.change(h=function(){o.checked&&l.addClass("jqTransformChecked")||l.removeClass("jqTransformChecked");return true});l.click(function(){if(!u.attr("disabled")){u.trigger("click").trigger("change");e('input[name="'+u.attr("name")+'"]',o.form).not(u).each(function(){var t=e(this);t.attr("type")=="radio"&&t.trigger("change")})}return false});o.checked&&l.addClass("jqTransformChecked");var p={radio:u,label:f,clear:function(){if(!o){throw"Double free."}u.unbind("change",h);l.unbind("click").remove();u.unwrap();o=u=c=l=f=null},parentInstance:n,context:t.context};e.data(o,"jqTransform",p);r.push(p)}return r},transformTextarea:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=e(o);if(u.hasClass("jqtransformdone")){continue}u.addClass("jqtransformdone");var f=a(u),l=e('<table cellspacing="0" cellpadding="0" border="0" class="jqTransformTextarea">'+'<tr><td class="jqTransformTextarea-tl"></td><td class="jqTransformTextarea-tm"></td><td class="jqTransformTextarea-tr"></td></tr>'+'<tr><td class="jqTransformTextarea-ml"> </td><td class="jqTransformTextarea-mm"><div></div></td><td class="jqTransformTextarea-mr"> </td></tr>'+'<tr><td class="jqTransformTextarea-bl"></td><td class="jqTransformTextarea-bm"></td><td class="jqTransformTextarea-br"></td></tr>'+"</table>").insertAfter(u).hover(function(){!l.hasClass("jqTransformTextarea-focus")&&l.addClass("jqTransformTextarea-hover")},function(){l.removeClass("jqTransformTextarea-hover")}),c=e(".jqTransformTextarea-mm",l),h=c.children("div"),p,d;u.focus(p=function(){l.removeClass("jqTransformTextarea-hover").addClass("jqTransformTextarea-focus")}).blur(d=function(){l.removeClass("jqTransformTextarea-focus")}).appendTo(h);if(e.browser.safari){c.addClass("jqTransformSafariTextarea");h.css("height",textarea.height()).css("width",textarea.width())}var v={textarea:u,label:f,clear:function(){if(!o){throw"Double free."}l.unbind("hover").remove();u.unbind("focus",p);u.unbind("blur",d);o=u=h=l=f=null},parentInstance:n,context:t.context};e.data(o,"jqTransform",v);r.push(v)}return r},transformSelect:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],f=e(o);if(f.hasClass("jqTransformHidden")||!!f.attr("multiple")){continue}var l=a(f),c=f.addClass("jqTransformHidden").wrap('<div class="jqTransformSelectWrapper"></div>').parent();c.prepend('<div><span></span><a href="#" class="jqTransformSelectOpen"></a></div><ul></ul>');var h=e("span:eq(0)",c),p=e("ul",c).css("width",f.width()).hide(),d=f.find("option:selected").index()||0,v=[];e("option",o).each(function(t){var n=e(this),r=e("<li>"),i=e('<a href="#" index="'+t+'">'+n.html()+"</a>");p.append(r);r.append(i);i.click(function(){if(t!=d){v[d].removeClass("selected");w.rowIndex=o.selectedIndex=d=t;i.addClass("selected");if(!!o.onchange){o.onchange()}f.trigger("change");h.html(i.html())}p.hide();return false});v.push(i)});v[d].addClass("selected");h.html(v[d].html());var m=e("a.jqTransformSelectOpen",c).click(function(){if(!!u&&p!=u){u.hide()}if(!f.attr("disabled")){u=p;p.slideToggle("fast")}return false});var g=f.outerWidth(),y=e.browser.msie&&parseInt(e.browser.version,10)==7?g>h.innerWidth()-20?g+(m.outerWidth()-20):c.width()-20:g>h.innerWidth()?g+m.outerWidth():c.width();c.css("width",y);p.css("width",y-2);h.css("width",g);p.css({display:"block",visibility:"hidden"});var b=v.length*e("li:first",p).height();b<p.height()&&p.css({height:b,overflow:"hidden"});p.css({display:"none",visibility:"visible"});var w={select:f,row:v,rowIndex:d,label:l,clear:function(){if(!o){throw"Double free."}m.unbind("click");for(var t=v.length;t--;v[t].unbind("click"));c.children("div:first").remove();p.remove();f.unwrap().removeClass("jqTransformHidden");e.removeData(o,"jqTransform");o=f=c=p=h=m=v=l=null},parentInstance:n,context:t.context};e.data(o,"jqTransform",w);r.push(w)}return r}});e(document).mousedown(function(t){if(!!u&&e(t.target).parents(".jqTransformSelectWrapper").length==0){u.hide();u=null}});e.fn.jqTransformProp=function(){var t=this[0],n=e(t);if(n.hasClass("jqtransformdone")||n.hasClass("jqTransformHidden")){return e.data(t,"jqTransform")}return false};e.fn.jqTransform=function(t){return this.each(function(n,r){var i=e(r);if(i.hasClass("jqtransformdone")){return}e.data(r,"jqTransform",new f(i,t||{}));i.addClass("jqtransformdone")})};e.fn.jqTransInputButton=function(t){return this.each(function(t,n){f(e(n),"transformInputButton")})};e.fn.jqTransInputText=function(t){return this.each(function(t,n){f(e(n),"transformInputText")})};e.fn.jqTransRadio=function(t){return this.each(function(t,n){f(e(n),"transformRadio")})};e.fn.jqTransTextarea=function(t){return this.each(function(t,n){f(e(n),"transformTextarea")})};e.fn.jqTransSelect=function(t){return this.each(function(t,n){f(e(n),"transformSelect")})}})(jQuery)
