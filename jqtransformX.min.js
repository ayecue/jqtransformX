/* jqtransformX, Author: swe, Version: 0.1.0.3 */
(function(e){"use strict";var t='input:submit, input:reset, input[type="button"]',n="input:text, input:password",r="input:checkbox",i="input:radio",s="textarea",o="select";var u,a=function(t){var n=t.next();if(!n.is("label")){if((n=t.prev()).is("label")){var r=t[0]?t[0].form:null,i=t.attr("id");if(i&&r){n=e(r).find('label[for="'+i+'"]')}}}return n.is("label")?n.css("cursor","pointer"):false},f=e.browser||function(){var e={},t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),r;if(n||(r=t.match(/version\/([\.\d]+)/i))){e[n[1]]=true;e.version=r?r[1]:n[2];return e}e[navigator.appName]=true;e.version=navigator.appVersion;return e}(),l=function(u,a){if(typeof a=="object"){a=e.extend({preloadImg:true},a);var f={keys:[]},l={transformInputButton:e(t,u),transformInputText:e(n,u),transformCheckbox:e(r,u),transformRadio:e(i,u),transformTextarea:e(s,u),transformSelect:e(o,u)};for(var c in l){if(!!l[c]&&l[c].length>0&&!!this[c]){var h=new this[c](l[c],f);if(!!h){f[c]=h;f.keys.push(c)}}}return f}else if(typeof a=="string"&&this[a]){h=new this[a](u,null);if(!!h){var f={keys:[]};f[a]=h;f.keys.push(a);return f}}return false};e.extend(l.prototype,{transformInputButton:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){(function(){var s=t[i],o=e(s);if(o.hasClass("jqTransformButton")){return}var u=a(o),f=o.clone(true,true),l=e('<button id="'+s.id+'" name="'+s.name+'" type="'+s.type+'" class="'+s.className+' jqTransformButton"><span><span>'+o.attr("value")+"</span></span>").hover(function(){l.addClass("jqTransformButton_hover")},function(){l.removeClass("jqTransformButton_hover")}).mousedown(function(){l.addClass("jqTransformButton_click")}).mouseup(function(){l.removeClass("jqTransformButton_click")});o.replaceWith(l);var c={inputButton:l,label:u,clear:function(){if(!s){throw"Double free."}l.replaceWith(f);s=o=f=l=u=null},parentInstance:n,context:t.context};e.data(s,"jqTransform",c);r.push(c)}).call(this)}return r},transformInputText:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){(function(){var s=t[i],o=e(s);if(o.hasClass("jqTransformHidden")||!o.is("input")){return}var u=a(o),l=o.width(),c=o.attr("size"),h,p,d;if(!!c){o.css("width",l=c*10)}o.addClass("jqTransformInput").wrap('<div class="jqTransformInputWrapper"><div class="jqTransformInputInner"><div></div></div></div>');var v=o.parent().parent().parent().css("width",l+10);o.focus(h=function(){v.addClass("jqTransformInputWrapper_focus")}).blur(p=function(){v.removeClass("jqTransformInputWrapper_focus")}).hover(d=function(){v.addClass("jqTransformInputWrapper_hover")},function(){v.removeClass("jqTransformInputWrapper_hover")});if(f.safari){v.addClass("jqTransformSafari");o.css("width",v.width()+16)}var m={inputText:o,label:u,clear:function(){if(!s){throw"Double free."}o.unbind("focus",h).unbind("blur",p).unbind("hover",d).unwrap();s=o=v=u=null},parentInstance:n,context:t.context};e.data(s,"jqTransform",m);r.push(m)}).call(this)}return r},transformCheckbox:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){(function(){var s=t[i],o=e(s);if(o.hasClass("jqTransformHidden")){return}var u=a(o),f=e('<a href="#" class="jqTransformCheckbox"></a>'),l=o.addClass("jqTransformHidden").wrap('<span class="jqTransformCheckboxWrapper"></span>').parent().prepend(f),c;o.change(c=function(){s.checked&&f.addClass("jqTransformChecked")||f.removeClass("jqTransformChecked");return true});f.click(function(){if(!o.attr("disabled")){o.trigger("click").trigger("change")}return false});s.checked&&f.addClass("jqTransformChecked");var h={checkbox:o,label:u,clear:function(){if(!s){throw"Double free."}o.unbind("change",c);f.unbind("click").remove();o.unwrap();s=o=l=f=u=null},parentInstance:n,context:t.context};e.data(s,"jqTransform",h);r.push(h)}).call(this)}return r},transformRadio:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){(function(){var s=t[i],o=e(s);if(o.hasClass("jqTransformHidden")){return}var u=a(o),f=e('<a href="#" class="jqTransformRadio" rel="'+s.name+'"></a>'),l=o.addClass("jqTransformHidden").wrap('<span class="jqTransformRadioWrapper"></span>').parent().prepend(f),c;o.change(c=function(){s.checked&&f.addClass("jqTransformChecked")||f.removeClass("jqTransformChecked");return true});f.click(function(){if(!o.attr("disabled")){o.trigger("click").trigger("change");e('input[name="'+o.attr("name")+'"]',s.form).not(o).each(function(){var t=e(this);t.attr("type")=="radio"&&t.trigger("change")})}return false});s.checked&&f.addClass("jqTransformChecked");var h={radio:o,label:u,clear:function(){if(!s){throw"Double free."}o.unbind("change",c);f.unbind("click").remove();o.unwrap();s=o=l=f=u=null},parentInstance:n,context:t.context};e.data(s,"jqTransform",h);r.push(h)}).call(this)}return r},transformTextarea:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){(function(){var s=t[i],o=e(s);if(o.hasClass("jqtransformdone")){return}o.addClass("jqtransformdone");var u=a(o),l=e('<table cellspacing="0" cellpadding="0" border="0" class="jqTransformTextarea">'+'<tr><td class="jqTransformTextarea-tl"></td><td class="jqTransformTextarea-tm"></td><td class="jqTransformTextarea-tr"></td></tr>'+'<tr><td class="jqTransformTextarea-ml"> </td><td class="jqTransformTextarea-mm"><div></div></td><td class="jqTransformTextarea-mr"> </td></tr>'+'<tr><td class="jqTransformTextarea-bl"></td><td class="jqTransformTextarea-bm"></td><td class="jqTransformTextarea-br"></td></tr>'+"</table>").insertAfter(o).hover(function(){!l.hasClass("jqTransformTextarea-focus")&&l.addClass("jqTransformTextarea-hover")},function(){l.removeClass("jqTransformTextarea-hover")}),c=e(".jqTransformTextarea-mm",l),h=c.children("div"),p,d;o.focus(p=function(){l.removeClass("jqTransformTextarea-hover").addClass("jqTransformTextarea-focus")}).blur(d=function(){l.removeClass("jqTransformTextarea-focus")}).appendTo(h);if(f.safari){c.addClass("jqTransformSafariTextarea");h.css("height",textarea.height()).css("width",textarea.width())}var v={textarea:o,label:u,clear:function(){if(!s){throw"Double free."}l.unbind("hover").remove();o.unbind("focus",p);o.unbind("blur",d);s=o=h=l=u=null},parentInstance:n,context:t.context};e.data(s,"jqTransform",v);r.push(v)}).call(this)}return r},transformSelect:function(t,n){var r=[];for(var i=0,s=t.length;i<s;i++){(function(){var s=t[i],o=e(s);if(o.hasClass("jqTransformHidden")||!!o.attr("multiple")){return}var l=a(o),c=o.addClass("jqTransformHidden").wrap('<div class="jqTransformSelectWrapper"></div>').parent();c.prepend('<div><span></span><a href="#" class="jqTransformSelectOpen"></a></div><ul></ul>');var h=e("span:eq(0)",c),p=e("ul",c).css("width",o.width()).hide(),d=o.find("option:selected").index()||0,v=[];e("option",s).each(function(t){var n=e(this),r=e("<li>"),i=e('<a href="#" index="'+t+'">'+n.html()+"</a>");p.append(r);r.append(i);i.click(function(){if(t!=d){v[d].removeClass("selected");w.rowIndex=s.selectedIndex=d=t;i.addClass("selected");if(!!s.onchange){s.onchange()}o.trigger("change");h.html(i.html())}p.hide();return false});v.push(i)});v[d].addClass("selected");h.html(v[d].html());var m=e("a.jqTransformSelectOpen",c).click(function(){if(!!u&&p!=u){u.hide()}if(!o.attr("disabled")){u=p;p.slideToggle("fast")}return false});var g=o.outerWidth(),y=f.msie&&parseInt(f.version,10)==7?g>h.innerWidth()-20?g+(m.outerWidth()-20):c.width()-20:g>h.innerWidth()?g+m.outerWidth():c.width();c.css("width",y);p.css("width",y-2);h.css("width",g);p.css({display:"block",visibility:"hidden"});var b=v.length*e("li:first",p).height();b<p.height()&&p.css({height:b,overflow:"hidden"});p.css({display:"none",visibility:"visible"});var w={select:o,row:v,rowIndex:d,label:l,clear:function(){if(!s){throw"Double free."}m.unbind("click");for(var t=v.length;t--;v[t].unbind("click"));c.children("div:first").remove();p.remove();o.unwrap().removeClass("jqTransformHidden");e.removeData(s,"jqTransform");s=o=c=p=h=m=v=l=null},parentInstance:n,context:t.context};e.data(s,"jqTransform",w);r.push(w)}).call(this)}return r}});e(document).mousedown(function(t){if(!!u&&e(t.target).parents(".jqTransformSelectWrapper").length==0){u.hide();u=null}});e.fn.jqTransformProp=function(){var t=this[0],n=e(t);if(n.hasClass("jqtransformdone")||n.hasClass("jqTransformHidden")){return e.data(t,"jqTransform")}return false};e.fn.jqTransform=function(t){return this.each(function(n,r){var i=e(r);if(i.hasClass("jqtransformdone")){return}e.data(r,"jqTransform",new l(i,t||{}));i.addClass("jqtransformdone")})};e.fn.jqTransInputButton=function(t){return this.each(function(t,n){l(e(n),"transformInputButton")})};e.fn.jqTransInputText=function(t){return this.each(function(t,n){l(e(n),"transformInputText")})};e.fn.jqTransRadio=function(t){return this.each(function(t,n){l(e(n),"transformRadio")})};e.fn.jqTransTextarea=function(t){return this.each(function(t,n){l(e(n),"transformTextarea")})};e.fn.jqTransSelect=function(t){return this.each(function(t,n){l(e(n),"transformSelect")})}})(jQuery)
